<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <title>Stage 4</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            padding-top: 140px;
            background-color: #d6eaf8 !important;
        }
        header {
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #1b4f72;
            color: white;
            padding: 15px 20px;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            border-bottom: 1px solid white;
        }
        header img {
            margin-right: 35px;
            border-radius: 50px;
        }
        header .company-name {
            text-align: center;
            color: #E6E6FA;
        }
        header .company-name h2 {
            font-family: Arial, sans-serif;
            font-size: 40px;
            font-weight: 900;
            font-style: italic;
            margin-bottom: 10px;
        }
        header .company-name h4 {
            font-family: Arial, sans-serif;
            font-size: 25px;
            font-weight: bold;
            font-style: italic;
            margin: 0;
        }
        .navbar-section {
            background-color: #1b4f72;
            padding: 25px 0 0 0;
            position: fixed;
            top: 90px;
            left: 0;
            right: 0;
            z-index: 999;
            margin-bottom: 20px;
        }
        .nav-link {
            color: white !important;
            font-size: 22px;
            padding: 12px 25px;
        }
        .nav-item {
            list-style: none;
            display: inline-block;
            margin-right: 20px;
        }
        .navbar-section a:hover {
            background-color:  #7fb3d5 ;
            color: black !important;
            border-radius: 5px;
        }
        h1{
			font-weight: bold; 
			font-size: 30px; 
			text-align: center; 
			margin-bottom: 20px;color:#1b4f72;
		}
		
        .container {
           width: 80%;
           margin-top: 60px;
           text-align: center;

        }
        .accordion {
            background-color: #7fb3d5;
            cursor: pointer;
            padding: 10px;
            width: 100%;
            border: none;
            text-align: left;
            outline: none;
            font-size: 18px;
            transition: 0.4s;
            position: relative;
        }
        .accordion::after {
            content: '\25BC';
            font-size: 16px;
            position: absolute;
            right: 10px;
            transition: transform 0.4s;
        }
        .active::after {
            transform: rotate(180deg);
        }
        .active, .accordion:hover {
            background-color:#1b4f72;
            color:white;
        }
        .panel {
            padding: 10px;
            display: none;
            overflow: hidden;
            background-color: white;
            text-align: left;
        }
        table {
            width: 100%;
            border-collapse: collapse !important;
			background-color: #d6eaf8  ;
        }
        th, td {
            border: 1px solid black !important;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #d6eaf8  ;
        }
        .child-row th {
            background-color: #ffffff; /* White background for child rows */
            color: black;
            padding-left: 30px; /* Indent child rows */
        }
        input {
            width: 90%;
            padding: 5px;
            box-sizing: border-box;
			border:1px solid black;

        }
        .submit {
            padding: 10px 20px;
            font-size: 18px; 
            background-color: #1b4f72;
            color: white;
            border: none; 
            cursor: pointer; 
            border-radius: 5px;
            width: 15%;  
            display: inline-block; 
            margin: 5px; 
        }
        
    </style>
</head>
    <body>
		<!--header section-->
		<header>
			<img src="logocct.jpg" style="width:100px; height:80px" alt="Company Logo" />
			<div class="company-name">
				<h2>CCT Stonexa</h2> 
				<h4>Karimnagar</h4>
			</div>
		</header>
		<!--navbar section-->
		<div class="navbar-section">
            <ul class="nav justify-content-center">
                <li class="nav-item"><a class="nav-link" href="dashboard.html">Home</a></li>
                <li class="nav-item"><a class="nav-link" href="stageOne.html">Add Product</a></li>
                <li class="nav-item"><a class="nav-link" href="productList.html">Search & Edit</a></li>
                <li class="nav-item"><a class="nav-link" href="productSale.html">Sell</a></li>
                <li class="nav-item"><a class="nav-link" href="salesreport.html">Sales Report</a></li>
                <li class="nav-item"><a class="nav-link" href="slabsReport.html">Slabs Report</a></li>
                <li class="nav-item"><a class="nav-link" href="graphReport.html">Graph Report</a></li>
            </ul>
        </div>
    <div class="container">
        <h1>Stage-4 Slabs Auto Polishing</h1>
        <form id="inventoryForm">
			<!-- First Accordion: Production Details -->
			<button type="button" class="accordion">Production Details</button>
			<div class="panel">
				<div class="scroll-table">
					<table>
						<tr>
							<th>Date of Polishing</th>
							<td><input type="date" name="date_of_polishing" id="date_of_polishing"></td>
						</tr>
						<tr>
							<th>Block No.</th>
							<td><label id="block_no"></label></td>
						</tr>
						<tr>
							<th>Block Colour</th>
							<td><label id="block_colour"></label></td>
						</tr>
						<tr><th>Block Part</th><td>
							<select name="block_parts" id="block_parts">
								<option value="part_a">Part A</option>
								<option value="part_b">Part B</option>
								<option value="part_c">Part C</option>
							</select>
						</td></tr>
						<tr>
							<th colspan="2">
								<fieldset>
									<legend>Production After Grinding</legend>
									<table>
										<tr>
											<th>No of Pcs</th>
											<td><label id="production_no_of_pcs" ></label></td>
										</tr>
										<tr>
											<th>SFT</th>
											<td><label id="production_sft" ></label></td>
										</tr>
									</table>
								</fieldset>
							</th>
						</tr>
						<tr>
							<th>Thickness(mm)</th>
							<td><label id="thickness"></label></td>
						</tr>
					</table>
				</div>
			</div>

			<!-- Second Accordion: Slabs Production (After Polishing) -->
			<button type="button" class="accordion">Slabs Production (After Polishing)</button>
			<div class="panel">
				<div class="scroll-table">
					<table>
						<tr>
							<th colspan="2">
								<fieldset>
									<legend>Slab Production (After Polishing)</legend>
									<table>
										<tr>
											<th>Length</th>
											<td><input type="number" step="0.01" name="polishing_length" id="polishing_length" min="0"></td>
										</tr>
										<tr>
											<th>Height</th>
											<td><input type="number" step="0.01" name="polishing_height" id="polishing_height" min="0"></td>
										</tr>
										<tr>
											<th>No of Pcs</th>
											<td><input type="number" step="0.01" name="polishing_no_of_pcs" id="polishing_no_of_pcs" min="0"></td>
										</tr>
										<tr>
											<th>Qty (SFT)</th>
											<td><input type="number" step="0.001" name="polishing_sft" id="polishing_sft" min="0"></td>
										</tr>
									</table>
								</fieldset>
							</th>
						</tr>
						<tr>
							<th colspan="2">
								<fieldset>
									<legend>Short/Damage (Between Grinding and Polishing)</legend>
									<table>
										<tr>
											<th>Short PCs</th>
											<td><input type="number" step="0.01" name="polishing_short_pcs" id="polishing_short_pcs" min="0"></td>
										</tr>
										<tr>
											<th>Short (SFT)</th>
											<td><input type="number" step="0.001" name="polishing_short_sft" id="polishing_short_sft" min="0"></td>
										</tr>
									</table>
								</fieldset>
							</th>
						</tr>
					</table>
				</div>
			</div>

			<!-- Third Accordion: Stock Summary -->
			<button type="button" class="accordion">Stock Summary</button>
			<div class="panel">
				<div class="scroll-table">
					<table>
						<tr>
							<th colspan="5">Marking/Sales Particulars</th>
						</tr>
						<tr>
							<th>Type</th>
							<th colspan="2">No of Pcs</th>
							<th colspan="2">SFT</th>
						</tr>
						<tr>
							<td>Fresh</td>
							<td colspan="2"><input type="number" step="0.01" name="fresh_pcs" id="fresh_pcs"></td>
							<td colspan="2"><input type="number" step="0.001" name="fresh_sft" id="fresh_sft"></td>
						</tr>
						<tr>
							<td>Semi-Fresh</td>
							<td colspan="2"><input type="number" step="0.01" name="semi_fresh_pcs" id="semi_fresh_pcs"></td>
							<td colspan="2"><input type="number" step="0.001" name="semi_fresh_sft" id="semi_fresh_sft"></td>
						</tr>
						<tr>
							<td>Commercial</td>
							<td colspan="2"><input type="number" step="0.01" name="commercial_pcs" id="commercial_pcs"></td>
							<td colspan="2"><input type="number" step="0.001" name="commercial_sft" id="commercial_sft"></td>
						</tr>
						<tr>
							<td>Closing Stock/ Total Qty. (Before Sale) (SFT)</td>
							<td colspan="2"><input type="number" step="0.01" name="closing_stock_qty" id="closing_stock_qty"></td>
							<td colspan="2"><input type="number" step="0.001" name="closing_stock_sft" id="closing_stock_sft"></td>
						</tr>
						<tr>
							<th colspan="5">Short/Damage</th>
						</tr>
						<tr>
							<th>Short PCs</th>
							<td colspan="4"><input type="number" step="0.01" name="slabs_short_pcs" id="slabs_short_pcs"></td>
						</tr>
						<tr>
							<th>Short (SFT)</th>
							<td colspan="4"><input type="number" step="0.001" name="slabs_short_sft" id="slabs_short_sft"></td>
						</tr>
					</table>
				</div>
			</div>

		<br>
		<div style="text-align: center; margin-top: 20px;">
                <button type="submit" class="submit" style="display: none" id="backButton">Back</button>
				<button type="submit" class="submit" style="display: block" id="saveButton">Save</button>
				<button type="submit" class="submit" style="width: 200px; display: none" id="moveToSaleButton">Move to Sale</button>
          </div>
	</form>

    </div>

    <script>
        let previousBlockPart = "part_a"; // Track the previous block part

document.addEventListener("DOMContentLoaded", function () {
    // Extract block_id from the URL
    const urlParams = new URLSearchParams(window.location.search);
    const blockId = urlParams.get('block_id');

    let blockData; // Declare blockData globally

    if (blockId) {
		document.querySelectorAll(".submit").forEach(button => {
					button.style.display = "inline-block"; // Make all submit buttons visible
				});	
        // Fetch data from the database using the block_id
        fetchBlockDetails(blockId);
    } else {
        alert("Block ID not found in the URL.");
    }

    // Function to fetch block details from the database
    function fetchBlockDetails(blockId) {
        var xhr = new XMLHttpRequest();
        xhr.onreadystatechange = function () {
            if (xhr.readyState === 4) {
                if (xhr.status === 200) {
                    blockData = JSON.parse(xhr.responseText); // Assign fetched data to blockData
                    populateForm(blockData, previousBlockPart); // Populate form with fetched data
                } else if (xhr.status === 404) {
                    alert("Error: Block not found. Please check the Block ID.");
                } else {
                    alert("Error fetching block details. Status: " + xhr.status);
                }
            }
        };

        xhr.open("GET", `https://shivadb-f348.restdb.io/rest/plm-products-db/${blockId}`);
        xhr.setRequestHeader("x-api-key", "657c53fe63ede92cdbf17208");
        xhr.send();
    }

    // Event listener for block_parts dropdown change
    document.getElementById("block_parts").addEventListener("change", function () {
        const selectedBlockPart = this.value; // Get the selected block part
        if (blockData) {
            const partData = blockData.dressing?.[selectedBlockPart] || {};

            // Check if slabs_production data exists
            if (!partData.slabs_production) {
                alert(`No slabs production data found for ${selectedBlockPart}. Reverting to previous selection.`);
                this.value = previousBlockPart; // Revert to the previous block part
                return;
            }

            // Save the current form data before populating the form with new data
            saveFormData(blockData, previousBlockPart);

            // Populate form with the selected block part's data
            populateForm(blockData, selectedBlockPart);

            // Update the previous block part
            previousBlockPart = selectedBlockPart;
        } else {
            alert("Block data is not loaded yet.");
        }
    });
	
			// Add event listener to the Back button
            const backButton = document.getElementById("backButton");
            if (backButton) {
                backButton.addEventListener("click", function (event) {
                    event.preventDefault(); // Prevent default form submission
                    window.history.back(); // Navigate to the previous page
                });
            } else {
                console.error("Back button not found!");
            }

            // Add event listener to the Move to Polishing button
            const moveToSaleButton = document.getElementById("moveToSaleButton");
            if (moveToSaleButton) {
                moveToSaleButton.addEventListener("click", function (event) {
                    event.preventDefault(); // Prevent default form submission

                    const urlParams = new URLSearchParams(window.location.search);
                    const block_id = urlParams.get("block_id");

                    if (block_id) {
                        // Redirect to stageTwo.html with the block_id parameter
                        window.location.href = `productSale.html`;
                    } else {
                        alert("No block ID found. Please save the record first.");
                    }
                });
            } else {
                console.error("Move to Production button not found!");
            }

	
    // Function to save the current form data into blockData
    function saveFormData(blockData, blockPart) {
        const partData = blockData.dressing?.[blockPart] || {};

        // Save Production Details
        partData.slabs_auto_polishing = {
            date_of_polishing: document.getElementById("date_of_polishing").value,
            slabs_after_polishing: {
                polished_length: parseFloat(document.getElementById("polishing_length").value) || 0,
                polished_height: parseFloat(document.getElementById("polishing_height").value) || 0,
                polished_no_of_pcs: parseFloat(document.getElementById("polishing_no_of_pcs").value) || 0,
                polished_sft: parseFloat(document.getElementById("polishing_sft").value) || 0,
                polished_short_pcs: parseFloat(document.getElementById("polishing_short_pcs").value) || 0,
                polished_short_sft: parseFloat(document.getElementById("polishing_short_sft").value) || 0,
            },
        };

        // Save Stock Summary
        partData.marking_sales_particulars = {
            fresh: {
                fresh_pcs: parseFloat(document.getElementById("fresh_pcs").value) || 0,
                fresh_sft: parseFloat(document.getElementById("fresh_sft").value) || 0,
            },
            semi_fresh: {
                semi_fresh_pcs: parseFloat(document.getElementById("semi_fresh_pcs").value) || 0,
                semi_fresh_sft: parseFloat(document.getElementById("semi_fresh_sft").value) || 0,
            },
            commercial: {
                commercial_pcs: parseFloat(document.getElementById("commercial_pcs").value) || 0,
                commercial_sft: parseFloat(document.getElementById("commercial_sft").value) || 0,
            },
            closing_stock_qty: parseFloat(document.getElementById("closing_stock_qty").value) || 0,
            closing_stock_sft: parseFloat(document.getElementById("closing_stock_sft").value) || 0,
            slabs_short_pcs: parseFloat(document.getElementById("slabs_short_pcs").value) || 0,
            slabs_short_sft: parseFloat(document.getElementById("slabs_short_sft").value) || 0,
        };

        // Update the blockData object
        blockData.dressing[blockPart] = partData;
    }

    // Function to populate the form based on the selected block part
    function populateForm(blockData, blockPart) {
        // Access the data for the selected block part
        const partData = blockData.dressing?.[blockPart] || {};

        // Populate Production Details
        document.getElementById("date_of_polishing").value = partData.slabs_auto_polishing?.date_of_polishing || "";
        document.getElementById("block_no").textContent = blockData.id || "";
        document.getElementById("block_colour").textContent = blockData.blocks?.block_color || "";
        document.getElementById("block_parts").value = blockPart;
        document.getElementById("production_no_of_pcs").textContent = partData.slabs_production?.production_pcs || "0";
        document.getElementById("production_sft").textContent = partData.slabs_production?.production_sft || "0";
        document.getElementById("thickness").textContent = partData.slabs_production?.thickness || "0";

        // Populate Slabs Production (After Polishing)
        document.getElementById("polishing_length").value = parseFloat(partData.slabs_auto_polishing?.slabs_after_polishing?.polished_length) || "";
        document.getElementById("polishing_height").value = parseFloat(partData.slabs_auto_polishing?.slabs_after_polishing?.polished_height) || "";
        document.getElementById("polishing_no_of_pcs").value = parseFloat(partData.slabs_auto_polishing?.slabs_after_polishing?.polished_no_of_pcs) || "";
        document.getElementById("polishing_sft").value = parseFloat(partData.slabs_auto_polishing?.slabs_after_polishing?.polished_sft) || "";
        document.getElementById("polishing_short_pcs").value = parseFloat(partData.slabs_auto_polishing?.slabs_after_polishing?.polished_short_pcs) || "";
        document.getElementById("polishing_short_sft").value = parseFloat(partData.slabs_auto_polishing?.slabs_after_polishing?.polished_short_sft) || "";

        // Populate Stock Summary
        document.getElementById("fresh_pcs").value = parseFloat(partData.marking_sales_particulars?.fresh?.fresh_pcs) || "";
        document.getElementById("fresh_sft").value = parseFloat(partData.marking_sales_particulars?.fresh?.fresh_sft) || "";
        document.getElementById("semi_fresh_pcs").value = parseFloat(partData.marking_sales_particulars?.semi_fresh?.semi_fresh_pcs) || "";
        document.getElementById("semi_fresh_sft").value = parseFloat(partData.marking_sales_particulars?.semi_fresh?.semi_fresh_sft) || "";
        document.getElementById("commercial_pcs").value = parseFloat(partData.marking_sales_particulars?.commercial?.commercial_pcs) || "";
        document.getElementById("commercial_sft").value = parseFloat(partData.marking_sales_particulars?.commercial?.commercial_sft) || "";
        document.getElementById("closing_stock_qty").value = parseFloat(partData.marking_sales_particulars?.closing_stock_qty) || "";
        document.getElementById("closing_stock_sft").value = parseFloat(partData.marking_sales_particulars?.closing_stock_sft) || "";
        document.getElementById("slabs_short_pcs").value = parseFloat(partData.marking_sales_particulars?.slabs_short_pcs) || "";
        document.getElementById("slabs_short_sft").value = parseFloat(partData.marking_sales_particulars?.slabs_short_sft) || "";
    }

    // Rest of your existing code (accordion functionality, calculations, etc.)
    var acc = document.getElementsByClassName("accordion");
    for (var i = 0; i < acc.length; i++) {
        acc[i].addEventListener("click", function () {
            this.classList.toggle("active");
            var panel = this.nextElementSibling;
            if (panel.style.display === "block") {
                panel.style.display = "none";
            } else {
                panel.style.display = "block";
            }
        });
    }

    // Attach event listeners for calculations
    function getValue(id) {
        return parseFloat(document.getElementById(id)?.value) || 0;
    }

    function calculateSlabsProductionQty() {
        let polishingLength = getValue("polishing_length");
        let polishingWidth = getValue("polishing_height");
        let polishedPcs = getValue("polishing_no_of_pcs");

        let polishingSft = (polishingLength * polishingWidth * polishedPcs) / 144;
        document.getElementById("polishing_sft").value = polishingSft.toFixed(3);

        let productionPcs = parseFloat(getInnerText("production_no_of_pcs"));
        document.getElementById("polishing_short_pcs").value = Math.max(productionPcs - polishedPcs, 0);

        let productionSft = parseFloat(getInnerText("production_sft"));
        document.getElementById("polishing_short_sft").value = Math.max(productionSft - polishingSft, 0).toFixed(3);
    }

    function calculateClosingStockDamage() {
		// Parse input values, defaulting to 0 if invalid
		let freshPcs = parseInt(getValue("fresh_pcs")) || 0;
		let freshSft = parseFloat(getValue("fresh_sft")) || 0;
		let semiFreshPcs = parseInt(getValue("semi_fresh_pcs")) || 0;
		let semiFreshSft = parseFloat(getValue("semi_fresh_sft")) || 0;
		let commercialPcs = parseInt(getValue("commercial_pcs")) || 0;
		let commercialSft = parseFloat(getValue("commercial_sft")) || 0;

		// Calculate closing stock quantities
		let closingStockQty = freshPcs + semiFreshPcs + commercialPcs;
		let closingStockSft = freshSft + semiFreshSft + commercialSft;

		// Update closing stock fields
		document.getElementById("closing_stock_qty").value = closingStockQty;
		document.getElementById("closing_stock_sft").value = closingStockSft.toFixed(3);

		// Parse polished values, defaulting to 0 if invalid
		let polishedPcs = parseInt(getValue("polishing_no_of_pcs")) || 0;
		let polishingSft = parseFloat(getValue("polishing_sft")) || 0;

		// Calculate short/damage quantities
		let slabsShortPcs = Math.max(polishedPcs - closingStockQty, 0);
		let slabsShortSft = Math.max(polishingSft - closingStockSft, 0);

		// Update short/damage fields
		document.getElementById("slabs_short_pcs").value = slabsShortPcs;
		document.getElementById("slabs_short_sft").value = slabsShortSft.toFixed(3);
	}

    function attachEventListeners() {
        ["polishing_length", "polishing_height", "polishing_no_of_pcs"].forEach(id => {
            document.getElementById(id).addEventListener("input", calculateSlabsProductionQty);
        });

        ["fresh_pcs", "fresh_sft", "semi_fresh_pcs", "semi_fresh_sft", "commercial_pcs", "commercial_sft"].forEach(id => {
            document.getElementById(id).addEventListener("input", calculateClosingStockDamage);
        });
    }

    attachEventListeners();

    document.getElementById("inventoryForm").addEventListener("submit", function (event) {
        event.preventDefault();
        let isValid = true;

        this.querySelectorAll('input[required]').forEach(input => {
            if (!input.value.trim()) {
                isValid = false;
                input.classList.add("error");
            } else {
                input.classList.remove("error");
            }
        });

        if (isValid) {
            submitForm(blockId);
        } else {
            alert("Please fill all required fields.");
        }
    });

    function submitForm(blockId) {
        let blockPart = getValue("block_parts").toLowerCase().trim();

        if (!blockPart) {
            alert("Please select a Block Part.");
            return;
        }

        var xhr = new XMLHttpRequest();

        xhr.onreadystatechange = function () {
            if (xhr.readyState === 4) {
                if (xhr.status === 200) {
                    let existingData = JSON.parse(xhr.responseText);
                    updateRecord(existingData, blockPart, blockId);
                } else if (xhr.status === 404) {
                    alert("Error: Record not found. Please check the record ID.");
                } else {
                    alert("Error fetching existing data. Status: " + xhr.status);
                }
            }
        };

        xhr.open("GET", `https://shivadb-f348.restdb.io/rest/plm-products-db/${blockId}`);
        xhr.setRequestHeader("x-api-key", "657c53fe63ede92cdbf17208");
        xhr.send();
    }

    function updateRecord(existingData, blockPart, blockId) {
        let existingPart = existingData.dressing?.[blockPart] || {};

        let updatedPart = {
            ...existingPart,
            slabs_auto_polishing: {
                date_of_polishing: getValue("date_of_polishing"),
                slabs_after_polishing: {
                    polished_length: getValue("polishing_length"),
                    polished_height: getValue("polishing_height"),
                    polished_no_of_pcs: getValue("polishing_no_of_pcs"),
                    polished_sft: getValue("polishing_sft"),
                    polished_short_pcs: getValue("polishing_short_pcs"),
                    polished_short_sft: getValue("polishing_short_sft")
                }
            },
            marking_sales_particulars: {
                fresh: {
                    fresh_pcs: getValue("fresh_pcs"),
                    fresh_sft: getValue("fresh_sft")
                },
                semi_fresh: {
                    semi_fresh_pcs: getValue("semi_fresh_pcs"),
                    semi_fresh_sft: getValue("semi_fresh_sft")
                },
                commercial: {
                    commercial_pcs: getValue("commercial_pcs"),
                    commercial_sft: getValue("commercial_sft")
                },
                closing_stock_qty: getValue("closing_stock_qty"),
                closing_stock_sft: getValue("closing_stock_sft"),
                slabs_short_pcs: getValue("slabs_short_pcs"),
                slabs_short_sft: getValue("slabs_short_sft")
            }
        };

        let updatedData = {
            ...existingData,
            dressing: {
                ...existingData.dressing,
                [blockPart]: updatedPart
            }
        };

        var xhr = new XMLHttpRequest();
        xhr.onreadystatechange = function () {
            if (xhr.readyState === 4) {
                if (xhr.status === 200 || xhr.status === 201) {
                    alert("Stage-4 data updated successfully!");
                } else {
                    alert("Error updating Stage-4 data. Status: " + xhr.status);
                }
            }
        };

        xhr.open("PATCH", `https://shivadb-f348.restdb.io/rest/plm-products-db/${blockId}`);
        xhr.setRequestHeader("x-api-key", "657c53fe63ede92cdbf17208");
        xhr.setRequestHeader("Content-Type", "application/json");
        xhr.send(JSON.stringify(updatedData));
    }

    function getValue(id) {
        return document.getElementById(id)?.value || "";
    }

    function getInnerText(id) {
        return document.getElementById(id)?.textContent || "";
    }
});
    </script>	
</body>
</html>
